<!DOCTYPE html>
<!--
Author: Goudamy Sockalingam
-->
<html>
    <head>
        <title>Registration Form</title>
        <script src="modernizr.js"></script>
        <script type = "text/javascript">
            function strength(pass) {
                if (pass.length <= 24) {
                    var alpha = /[a-z]/;
                    var caps = /[A-Z]/;
                    var spl = /[\!\@\#\$\%\^\&\*\(\)\-\_\=\+\[\{\]\}\|\\\;\:\'\"\,\<\.\>\/\?\`\~]/;

                    if (caps.test(pass)) {
                        var stren = "Initial";
                        var c1 = pass.match(/[A-Z]/g).length;
                    }
                    if (spl.test(pass)) {
                        var stren = "Initial";
                        var c2 = pass.match(/[\!\@\#\$\%\^\&\*\(\)\-\_\=\+\[\{\]\}\|\\\;\:\'\"\,\<\.\>\/\?\`\~]/g).length;
                    }
                    if (alpha.test(pass)) {
                        var stren = "Initial";
                        var c3 = pass.match(/[a-z]/g).length;
                    }


                    if ((c1 > 2) && (c2 > 1) && (c1 > 1)) {
                        if ((pass.match(/[a-z]/g).length) >= 2) {

                            if ((pass.match(/[A-Z]/g).length) >= 3) {

                                if ((pass.match(/[\!\@\#\$\%\^\&\*\(\)\-\_\=\+\[\{\]\}\|\\\;\:\'\"\,\<\.\>\/\?\`\~]/g).length) >= 2) {

                                    if (((pass.match(/[\!\@\#\$\%\^\&\*\(\)\-\_\=\+\[\{\]\}\|\\\;\:\'\"\,\<\.\>\/\?\`\~]/g).length) >= 3) && ((pass.match(/[\!\@\#\$\%\^\&\*\(\)\-\_\=\+\[\{\]\}\|\\\;\:\'\"\,\<\.\>\/\?\`\~]/g).length) <= 5)) {
                                        var stren = "medium";

                                    } else if ((pass.match(/[\!\@\#\$\%\^\&\*\(\)\-\_\=\+\[\{\]\}\|\\\;\:\'\"\,\<\.\>\/\?\`\~]/g).length) >= 5) {
                                        var stren = "strong";

                                    } else {
                                        var stren = "Normal";

                                    }
                                }
                                else {
                                    var stren = "Initial";
                                }
                            }
                            else {
                                var stren = "Initial";
                            }
                        }
                        else {
                            var stren = "Initial";

                        }
                    }

                    progress(stren);
                } else {
                    alert("Password too big");
                }




            }

            function progress(stren) {

                var fill = "#33CC33";
                var str = "";

                if (stren == "Normal") {

                    var width = "30%";
                }

                else if (stren == "medium") {

                    var width = "60%";
                }
                else if (stren == "strong") {

                    var width = "100%";
                } else {

                    var width = "0%";
                }
                str = str + "<div style=\"border:#0066FF solid thin; width:200px; height:9px\">";
                str = str + "<div style=\"background-color:" + fill + "; width:" + width + "; height:9px\">";
                str = str + "</div></div>";

                if (stren == "strong") {
                    str = str + "Strong";
                }
                else if (stren == "medium") {
                    str = str + "Good!! But it can be better";
                }
                else if (stren == "Normal") {
                    str = str + "Normal!! But its easy to predict";

                } else {
                    str = str + "Not secure";
                }

                document.getElementById("progress").innerHTML = str;
            }
            function localStore() {
                var fname = document.gform.fname.value;
                var lname = document.gform.lname.value;
                var email = document.gform.email.value;
                var passwd = document.gform.password.value;
                var bday = document.gform.bday.value;
                var bday1 = document.gform.bday1.value;
                var bday2 = document.gform.bday2.value;
                var ssn = document.gform.ssn.value;
                var phone = document.gform.phone.value;

                localStorage.setItem("fname", fname);
                localStorage.setItem("lname", lname);
                localStorage.setItem("email", email);
                localStorage.setItem("passwd", passwd);
                localStorage.setItem("bday", bday);
                localStorage.setItem("bday1", bday1);
                localStorage.setItem("bday2", bday2);
                localStorage.setItem("ssn", ssn);
                localStorage.setItem("phone", phone);
                localStorage.setItem("credit", credit);
            }
            function handleClick(myRadio) {
                var fname = document.gform.fname.value;
                var lname = document.gform.lname.value;
                var email = document.gform.email.value;
                var passwd = document.gform.password.value;
                var bday = document.gform.bday.value;
                var bday1 = document.gform.bday1.value;
                var bday2 = document.gform.bday2.value;
                var ssn = document.gform.ssn.value;
                var phone = document.gform.phone.value;
                var password1 = document.gform.password1.value;
                if(password1 != passwd){
                    alert("Passwords dont match");
                }

                var credit = document.gform.credit.value;
                sessionStorage.setItem("fname", fname);
                sessionStorage.setItem("lname", lname);
                sessionStorage.setItem("email", email);
                sessionStorage.setItem("passwd", passwd);
                sessionStorage.setItem("bday", bday);
                sessionStorage.setItem("bday1", bday1);
                sessionStorage.setItem("bday2", bday2);
                sessionStorage.setItem("ssn", ssn);
                sessionStorage.setItem("phone", phone);
                sessionStorage.setItem("credit", credit);
                usemodernizer();

            }
            //check if browser supports local storage
            function  usemodernizer() {
                if (Modernizr.localstorage) {
                    alert("This Browser supports local storage");
                    // if offline save the details to local storage
                    var option = navigator.onLine;
                    if (option == "false") {
                        alert("Browser offline, storing the values in local storage");
                        localStore();
                    }

                } else {
                    alert("Sorry !! This browser doesn't seem to support Local Storage");
                }
            }



        </script>

        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <h1 align = "center"> Registration Page</h1>
        <div align = "center">
            <fieldset>
                <form name ="gform" onsubmit="return checkForm(this)">
                    <table align = "center" style ="border-spacing:20px">
                        <tr><td>First Name:</td><td> <input type ="text" name ="fname" placeholder = "Enter First Name" ><br></td>

                        <tr><td>Last Name: </td><td><input type ="text" name ="lname" placeholder = "Enter Last Name"><br></td>

                        <tr><td>email: </td><td><input type ="text" name = "email" placeholder = "Enter email-id"><br></td>

                        <tr><td>password: </td><td><input type ="password" name = "password" placeholder = "Enter password" onkeyup="strength(this.value)" title="Password must contain at least three uppercase letters, at least two lowercase letters,
                                                          and two special characters."></td><td>
                                <div id="progress"></div>  </td>   </tr>
                        <tr><td>confirm password: </td><td><input type ="password" name ="password1" placeholder = "Must be same as password" ></td></tr>

                        <tr><td>D.O.B</td><td><input type ="date" name ="bday"></td></tr>

                        <tr><td>D.O.B with time</td><td><input name ="bday1"></td></tr>

                        <tr><td>Local D.O.B</td><td><input type ="datetime-local" name ="bday2"></td></tr>

                        <tr><td>SSN</td><td><input type="text" name="ssn" pattern="[0-9]{3}-[0-9]{2}-[0-9]{4}" title="XXX-XX-XXXX" /></td></tr>

                        <tr><td>Phone</td><td><input type ="text" name ="phone" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" title="XXX-XXX-XXXX"></td></tr>

                        <tr><td>Credit card number</td><td><input type ="text" name ="credit" pattern="[0-9]{4}-[0-9]{4}-[0-9]{4}-[0-9]{4}" title="XXXX-XXXX-XXXX-XXXX"></td></tr>


                    </table>  

                    <input type ="submit" name = "submit" value = "create" onclick="handleClick(this)">
                </form>

            </fieldset>
        </div>
    </body>
</html>
